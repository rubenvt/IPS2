import{d as X,r as c,e as p,c as o,f as _,b as l,t as r,h as d,v as f,s as D,F as m,g as y,l as V,j as x,k as w,a as n,n as Y,_ as Z}from"./index-b060ee0a.js";import{H as ee}from"./Header-aaa21bdb.js";import{L as le,M as A,S as se}from"./Modal-5333ec3a.js";import{s as u}from"./index-f1848b5a.js";const te={class:"main-content"},ae={class:"content-area"},oe={class:"content-panel"},ne={class:"panel-header"},ie={class:"panel-actions"},de={key:0,class:"detail-panel"},ue={class:"detail-header"},re={class:"detail-title"},ve={class:"detail-subtitle"},ce={class:"detail-section"},fe={class:"section-content"},pe={class:"form-group"},me={class:"form-group"},ye=["value"],be={class:"form-group"},Se={class:"form-group"},ge={class:"toggle-switch"},ke={for:"schedule-active"},he={class:"detail-section"},_e={class:"section-content"},Ie={class:"form-group"},Ce={class:"form-group"},we={class:"form-group"},Pe={class:"days-of-week"},Ve=["onClick"],Ue={class:"form-group"},Te={class:"form-group"},$e={class:"detail-section"},De={class:"section-header"},xe={class:"section-content"},Ae={class:"assigned-players"},Ne={class:"player-name"},Be=["onClick"],Oe={key:0,class:"empty-state"},We={class:"form-group"},Me={class:"form-group"},Ee=["value"],Le={class:"form-group"},Ge={class:"form-group"},Fe={class:"player-selection"},He=["id","value"],je=["for"],qe={class:"player-location"},ze={class:"form-group"},Qe={class:"group-selection"},Re=["id","value"],Je=["for"],Ke={class:"group-count"},Xe=X({__name:"Schedules",setup(Ye){const P=c(""),v=c(null),b=c(!1),S=c(!1),g=c(""),k=c(null),h=c(""),I=c([]),C=c([]),N=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],U=p(()=>u.state.schedules.map(t=>({id:t.id,title:t.name,subtitle:`${$(t.playlistId)} • ${z(t.startTime,t.endTime)}`,icon:"fas fa-calendar-alt",actions:[{name:"edit",icon:"fas fa-edit"},{name:"duplicate",icon:"fas fa-copy"},{name:"delete",icon:"fas fa-trash"}]}))),B=p(()=>{if(!P.value)return U.value;const t=P.value.toLowerCase();return U.value.filter(e=>e.title.toLowerCase().includes(t)||e.subtitle.toLowerCase().includes(t))}),a=p(()=>v.value?u.state.schedules.find(t=>t.id===v.value):null),T=p(()=>u.state.playlists),O=p(()=>u.state.players),W=p(()=>u.state.playerGroups),M=p(()=>O.value.filter(t=>{var e;return!((e=a.value)!=null&&e.playerIds.includes(t.id))}));function E(t){P.value=t}function L(t){v.value=t}function G({id:t,action:e}){e==="edit"?v.value=t:e==="duplicate"?F(t):e==="delete"&&confirm("Are you sure you want to delete this schedule?")&&(u.removeSchedule(t),v.value===t&&(v.value=null))}function F(t){const e=u.getScheduleById(t);if(e){const s={...e,name:`${e.name} (Copy)`},i=u.addSchedule(s);v.value=i}}function H(){if(g.value&&k.value&&h.value){const t={name:g.value,playlistId:k.value,playerIds:[],startDate:h.value,daysOfWeek:[1,2,3,4,5],startTime:"09:00",endTime:"17:00",priority:10,active:!0},e=u.addSchedule(t);g.value="",k.value=null,h.value="",b.value=!1,v.value=e}}function j(){a.value&&(u.updateSchedule(a.value.id,a.value),alert("Schedule saved successfully!"))}function $(t){const e=u.getPlaylistById(t);return e?e.title:"Unknown Playlist"}function q(t){const e=u.getPlayerById(t);return e?e.name:"Unknown Player"}function z(t,e){return`${t} - ${e}`}function Q(t){var e;return((e=a.value)==null?void 0:e.daysOfWeek.includes(t))||!1}function R(t){if(!a.value)return;const e=a.value.daysOfWeek.indexOf(t);e===-1?a.value.daysOfWeek.push(t):a.value.daysOfWeek.splice(e,1)}function J(t){a.value&&(a.value.playerIds=a.value.playerIds.filter(e=>e!==t))}function K(){if(!a.value)return;const t=[...a.value.playerIds];I.value.forEach(e=>{t.includes(e)||t.push(e)}),C.value.forEach(e=>{const s=u.getPlayerGroupById(e);s&&s.playerIds.forEach(i=>{t.includes(i)||t.push(i)})}),a.value.playerIds=t,I.value=[],C.value=[],S.value=!1}return(t,e)=>(n(),o("div",te,[_(ee,{title:"Schedules"}),l("div",ae,[l("div",oe,[l("div",ne,[e[22]||(e[22]=l("div",{class:"panel-title"},"Schedules",-1)),l("div",ie,[l("button",{onClick:e[0]||(e[0]=s=>b.value=!0)},e[19]||(e[19]=[l("i",{class:"fas fa-plus"},null,-1)])),e[20]||(e[20]=l("button",null,[l("i",{class:"fas fa-filter"})],-1)),e[21]||(e[21]=l("button",null,[l("i",{class:"fas fa-ellipsis-v"})],-1))])]),_(se,{placeholder:"Search schedules...",onSearch:E}),_(le,{items:B.value,selectedId:v.value,onSelect:L,onAction:G},null,8,["items","selectedId"])]),a.value?(n(),o("div",de,[l("div",ue,[l("div",re,r(a.value.name),1),l("div",ve,r($(a.value.playlistId))+" • "+r(a.value.playerIds.length)+" players ",1)]),l("div",ce,[e[28]||(e[28]=l("div",{class:"section-header"},"Schedule Information",-1)),l("div",fe,[l("div",pe,[e[23]||(e[23]=l("label",{class:"form-label"},"Name",-1)),d(l("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.name=s)},null,512),[[f,a.value.name]])]),l("div",me,[e[24]||(e[24]=l("label",{class:"form-label"},"Playlist",-1)),d(l("select",{class:"form-control","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.playlistId=s)},[(n(!0),o(m,null,y(T.value,s=>(n(),o("option",{key:s.id,value:s.id},r(s.title),9,ye))),128))],512),[[D,a.value.playlistId]])]),l("div",be,[e[25]||(e[25]=l("label",{class:"form-label"},"Priority",-1)),d(l("input",{type:"number",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.priority=s),min:"1",max:"100"},null,512),[[f,a.value.priority]]),e[26]||(e[26]=l("small",{class:"form-text"},"Higher priority schedules take precedence when overlapping",-1))]),l("div",Se,[e[27]||(e[27]=l("label",{class:"form-label"},"Status",-1)),l("div",ge,[d(l("input",{type:"checkbox",id:"schedule-active","onUpdate:modelValue":e[4]||(e[4]=s=>a.value.active=s)},null,512),[[V,a.value.active]]),l("label",ke,r(a.value.active?"Active":"Inactive"),1)])])])]),l("div",he,[e[34]||(e[34]=l("div",{class:"section-header"},"Time Settings",-1)),l("div",_e,[l("div",Ie,[e[29]||(e[29]=l("label",{class:"form-label"},"Start Date",-1)),d(l("input",{type:"date",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=s=>a.value.startDate=s)},null,512),[[f,a.value.startDate]])]),l("div",Ce,[e[30]||(e[30]=l("label",{class:"form-label"},"End Date (Optional)",-1)),d(l("input",{type:"date",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=s=>a.value.endDate=s)},null,512),[[f,a.value.endDate]])]),l("div",we,[e[31]||(e[31]=l("label",{class:"form-label"},"Days of Week",-1)),l("div",Pe,[(n(),o(m,null,y(N,(s,i)=>l("div",{key:i,class:Y(["day-toggle",{active:Q(i)}]),onClick:Ze=>R(i)},r(s.substr(0,1)),11,Ve)),64))])]),l("div",Ue,[e[32]||(e[32]=l("label",{class:"form-label"},"Start Time",-1)),d(l("input",{type:"time",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=s=>a.value.startTime=s)},null,512),[[f,a.value.startTime]])]),l("div",Te,[e[33]||(e[33]=l("label",{class:"form-label"},"End Time",-1)),d(l("input",{type:"time",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=s=>a.value.endTime=s)},null,512),[[f,a.value.endTime]])])])]),l("div",$e,[l("div",De,[e[35]||(e[35]=l("div",null,"Assigned Players",-1)),l("button",{class:"btn-sm",onClick:e[9]||(e[9]=s=>S.value=!0)},"Assign Players")]),l("div",xe,[l("div",Ae,[(n(!0),o(m,null,y(a.value.playerIds,s=>(n(),o("div",{key:s,class:"assigned-player"},[e[37]||(e[37]=l("div",{class:"player-icon"},[l("i",{class:"fas fa-desktop"})],-1)),l("div",Ne,r(q(s)),1),l("button",{class:"remove-player-btn",onClick:i=>J(s)},e[36]||(e[36]=[l("i",{class:"fas fa-times"},null,-1)]),8,Be)]))),128))]),a.value.playerIds.length===0?(n(),o("div",Oe,' No players assigned to this schedule. Click "Assign Players" to add players. ')):x("",!0)])]),l("div",{class:"form-actions"},[e[38]||(e[38]=l("button",{class:"btn btn-secondary"},"Cancel",-1)),l("button",{class:"btn btn-primary",onClick:j},"Save Changes")])])):x("",!0)]),_(A,{modelValue:b.value,"onUpdate:modelValue":e[14]||(e[14]=s=>b.value=s),title:"Add New Schedule"},{footer:w(()=>[l("button",{class:"btn btn-secondary",onClick:e[13]||(e[13]=s=>b.value=!1)},"Cancel"),l("button",{class:"btn btn-primary",onClick:H},"Add Schedule")]),default:w(()=>[l("div",We,[e[39]||(e[39]=l("label",{class:"form-label"},"Schedule Name",-1)),d(l("input",{type:"text",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=s=>g.value=s)},null,512),[[f,g.value]])]),l("div",Me,[e[40]||(e[40]=l("label",{class:"form-label"},"Playlist",-1)),d(l("select",{class:"form-control","onUpdate:modelValue":e[11]||(e[11]=s=>k.value=s)},[(n(!0),o(m,null,y(T.value,s=>(n(),o("option",{key:s.id,value:s.id},r(s.title),9,Ee))),128))],512),[[D,k.value]])]),l("div",Le,[e[41]||(e[41]=l("label",{class:"form-label"},"Start Date",-1)),d(l("input",{type:"date",class:"form-control","onUpdate:modelValue":e[12]||(e[12]=s=>h.value=s)},null,512),[[f,h.value]])])]),_:1},8,["modelValue"]),_(A,{modelValue:S.value,"onUpdate:modelValue":e[18]||(e[18]=s=>S.value=s),title:"Assign Players to Schedule"},{footer:w(()=>[l("button",{class:"btn btn-secondary",onClick:e[17]||(e[17]=s=>S.value=!1)},"Cancel"),l("button",{class:"btn btn-primary",onClick:K},"Assign Selected")]),default:w(()=>[l("div",Ge,[e[43]||(e[43]=l("label",{class:"form-label"},"Select Players",-1)),l("div",Fe,[(n(!0),o(m,null,y(M.value,s=>(n(),o("div",{key:s.id,class:"player-option"},[d(l("input",{type:"checkbox",id:`player-${s.id}`,value:s.id,"onUpdate:modelValue":e[15]||(e[15]=i=>I.value=i)},null,8,He),[[V,I.value]]),l("label",{for:`player-${s.id}`,class:"player-label"},[e[42]||(e[42]=l("i",{class:"fas fa-desktop"},null,-1)),l("span",null,r(s.name),1),l("span",qe,r(s.location),1)],8,je)]))),128))])]),l("div",ze,[e[45]||(e[45]=l("label",{class:"form-label"},"Select Player Groups",-1)),l("div",Qe,[(n(!0),o(m,null,y(W.value,s=>(n(),o("div",{key:s.id,class:"group-option"},[d(l("input",{type:"checkbox",id:`group-${s.id}`,value:s.id,"onUpdate:modelValue":e[16]||(e[16]=i=>C.value=i)},null,8,Re),[[V,C.value]]),l("label",{for:`group-${s.id}`,class:"group-label"},[e[44]||(e[44]=l("i",{class:"fas fa-folder"},null,-1)),l("span",null,r(s.name),1),l("span",Ke,r(s.playerIds.length)+" players",1)],8,Je)]))),128))])])]),_:1},8,["modelValue"])]))}});const al=Z(Xe,[["__scopeId","data-v-b0807d78"]]);export{al as default};
